<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        Stage I - Data collection and Ingestion - CodiMD
    </title>
    <link rel="icon" type="image/png" href="http://localhost:3000/favicon.png">
    <link rel="apple-touch-icon" href="http://localhost:3000/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.0/css/bootstrap.min.css" integrity="sha256-H0KfTigpUV+0/5tn2HXC0CPwhhDhWgSawJdnFd0CGCo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fork-awesome/1.1.3/css/fork-awesome.min.css" integrity="sha256-ZhApazu+kejqTYhMF+1DzNKjIzP7KXu6AzyXcC1gMus=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css" integrity="sha256-tAflq+ymku3Khs+I/WcAneIlafYgDiOQ9stIHH985Wo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400italic,600,600italic,300italic,300|Source+Serif+Pro|Source+Code+Pro:400,300,500&subset=latin,latin-ext);.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{padding:0 1em;color:#777;border-left:.25em solid #ddd}.night .markdown-body blockquote{color:#bcbcbc}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.night .markdown-body h1,.night .markdown-body h2,.night .markdown-body h3,.night .markdown-body h4,.night .markdown-body h5,.night .markdown-body h6{color:#ddd}.markdown-body h1 .fa-link,.markdown-body h2 .fa-link,.markdown-body h3 .fa-link,.markdown-body h4 .fa-link,.markdown-body h5 .fa-link,.markdown-body h6 .fa-link{color:#000;vertical-align:middle;visibility:hidden;font-size:16px}.night .markdown-body h1 .fa-link,.night .markdown-body h2 .fa-link,.night .markdown-body h3 .fa-link,.night .markdown-body h4 .fa-link,.night .markdown-body h5 .fa-link,.night .markdown-body h6 .fa-link{color:#fff}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .fa-link,.markdown-body h2:hover .anchor .fa-link,.markdown-body h3:hover .anchor .fa-link,.markdown-body h4:hover .anchor .fa-link,.markdown-body h5:hover .anchor .fa-link,.markdown-body h6:hover .anchor .fa-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.night .markdown-body table tr{background-color:#5f5f5f}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.night .markdown-body table tr:nth-child(2n){background-color:#4f4f4f}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:.2em 0;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.night .markdown-body code,.night .markdown-body tt{color:#eee;background-color:hsla(0,0%,90.2%,.36)}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\A0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.markdown-body kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid;border-color:#ccc #ccc #bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important}.markdown-body pre{border:inherit!important}.night .markdown-body pre{filter:invert(100%)}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-webkit-inline-flex;display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.night .markdown-body .gist table tr:nth-child(2n){background-color:#ddd}.markdown-body code[data-gist-id]{background:none;padding:0;filter:invert(100%)}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.geo,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit}.night .markdown-body pre.graphviz .graph>polygon{fill:#333}.night .markdown-body pre.mermaid .sectionTitle,.night .markdown-body pre.mermaid .titleText,.night .markdown-body pre.mermaid text{fill:#fff}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.night .markdown-body .abc path{fill:#eee}.night .markdown-body .abc path.note_selected{fill:##4DD0E1}.night tspan{fill:#fefefe}.night pre rect{fill:transparent}.night pre.flow-chart path,.night pre.flow-chart rect{stroke:#fff}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body img{background-color:transparent}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;-webkit-transition:opacity .2s;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;-webkit-transition:opacity .2s;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.geo-map{width:100%;height:250px}.markmap-container{height:300px}.markmap-container>svg{width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:758px;margin-top:25px;margin-bottom:-25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:10000}.ui-toc-label{opacity:.9;background-color:#ccc;border:none}.ui-toc-label,.ui-toc .open .ui-toc-label{-webkit-transition:opacity .2s;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#5f5f5f}.ui-toc-label:focus{opacity:1;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;-webkit-transition:opacity .2s;transition:opacity .2s}.ui-toc-dropdown{margin-top:23px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child>ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.night .ui-toc-dropdown .nav>li>a:focus,.night .ui-toc-dropdown .nav>li>a:hover{color:#fff;border-left-color:#fff}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.night .ui-toc-dropdown .nav>.active:focus>a,.night .ui-toc-dropdown .nav>.active:hover>a,.night .ui-toc-dropdown .nav>.active>a{color:#fff;border-left:2px solid #fff}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.night .ui-toc-dropdown .nav>li>a{color:#aaa}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:50px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>a{padding-right:50px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:60px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>ul>li>a{padding-right:60px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>a:hover{padding-left:49px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>a:hover{padding-right:49px}.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>ul>li>ul>li>a:hover{padding-left:59px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>ul>li>ul>li>a:hover{padding-right:59px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>a{padding-left:48px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.active>.nav>.nav>.active>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active:hover>a{padding-right:48px}.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active>a{padding-left:58px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.active>.nav>.nav>.active>.nav>.active>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>.nav>.active>.nav>.active:hover>a{padding-right:58px}.markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,Hiragino Kaku Gothic Pro,"\30D2\30E9\30AE\30CE\89D2\30B4   Pro W3",Osaka,Meiryo,"\30E1\30A4\30EA\30AA",MS Gothic,"\FF2D\FF33   \30B4\30B7\30C3\30AF",sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,"\FF2D\FF33   \FF30\30B4\30B7\30C3\30AF",sans-serif}.markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang TC,Microsoft JhengHei,"\5FAE\8EDF\6B63\9ED1",sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,"\5FAE\8EDF\6B63\9ED1UI",sans-serif}.markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Arial,PingFang SC,Microsoft YaHei,"\5FAE\8F6F\96C5\9ED1",sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,"\5FAE\8F6F\96C5\9ED1UI",sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:rgba(0,0,0,.85)}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:contain}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}small span{line-height:22px}small .dropdown{display:inline-block}small .dropdown a:focus,small .dropdown a:hover{text-decoration:none}.unselectable{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}.night .navbar{background:#333;border-bottom-color:#333;color:#eee}.night .navbar a{color:#eee}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;font-family:Source Sans Pro,Helvetica,Arial,sans-serif;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid" lang="en"><h6 id="-Home-page"><a class="anchor hidden-xs" href="#-Home-page" title="-Home-page"><i class="fa fa-link"></i></a><a href="https://firas-jolha.github.io/fjiubd2024/" target="_blank" rel="noopener"><img src="https://cdn4.iconfinder.com/data/icons/bold-ui-1/60/Home_2-512.png" alt="1" width="30px" height="30px"> Home page</a></h6><h1 id="Stage-I---Data-collection-and-Ingestion"><a class="anchor hidden-xs" href="#Stage-I---Data-collection-and-Ingestion" title="Stage-I---Data-collection-and-Ingestion"><i class="fa fa-link"></i></a>Stage I - Data collection and Ingestion</h1><p><strong>Course:</strong> Big Data - IU S24<br>
<strong>Author:</strong> Firas Jolha</p><h1 id="Dataset"><a class="anchor hidden-xs" href="#Dataset" title="Dataset"><i class="fa fa-link"></i></a>Dataset</h1><ul>
<li>Some emps and depts
<ul>
<li><a href="https://disk.yandex.com/d/EgOiWzvrh9qLIg" target="_blank" rel="noopener">https://disk.yandex.com/d/EgOiWzvrh9qLIg</a></li>
</ul>
</li>
</ul><h1 id="Agenda"><a class="anchor hidden-xs" href="#Agenda" title="Agenda"><i class="fa fa-link"></i></a>Agenda</h1><p></p><div class="toc"><ul>
<li><a href="#Stage-I---Data-collection-and-Ingestion" title="Stage I - Data collection and Ingestion">Stage I - Data collection and Ingestion</a></li>
<li><a href="#Dataset" title="Dataset">Dataset</a></li>
<li><a href="#Agenda" title="Agenda">Agenda</a></li>
<li><a href="#Prerequisites" title="Prerequisites">Prerequisites</a></li>
<li><a href="#Objectives" title="Objectives">Objectives</a></li>
<li><a href="#Description" title="Description">Description</a></li>
<li><a href="#Dataset-Description" title="Dataset Description">Dataset Description</a></li>
<li><a href="#A-IU-Hadoop-cluster" title="A. IU Hadoop cluster">A. IU Hadoop cluster</a><ul>
<li><a href="#Initiate-the-project-repository" title="Initiate the project repository">Initiate the project repository</a></li>
<li><a href="#Download-dataset" title="Download dataset">Download dataset</a></li>
<li><a href="#Build-a-relational-Database-via-PostgreSQL" title="Build a relational Database via PostgreSQL">Build a relational Database via PostgreSQL</a></li>
<li><a href="#Import-the-database-into-HDFS-via-Sqoop" title="Import the database into HDFS via Sqoop">Import the database into HDFS via Sqoop</a></li>
</ul>
</li>
<li><a href="#B-HDP-Sandbox" title="B. HDP Sandbox">B. HDP Sandbox</a><ul>
<li><a href="#Initiate-the-project-repository1" title="Initiate the project repository">Initiate the project repository</a></li>
<li><a href="#Build-a-relational-Database-via-PostgreSQL1" title="Build a relational Database via PostgreSQL">Build a relational Database via PostgreSQL</a></li>
<li><a href="#Import-the-database-into-HDFS-via-Sqoop1" title="Import the database into HDFS via Sqoop">Import the database into HDFS via Sqoop</a></li>
</ul>
</li>
<li><a href="#References" title="References">References</a></li>
</ul>
</div><p></p><h1 id="Prerequisites"><a class="anchor hidden-xs" href="#Prerequisites" title="Prerequisites"><i class="fa fa-link"></i></a>Prerequisites</h1><ul>
<li>HDP 2.6.5 is installed OR You have access to IU Hadoop cluster</li>
</ul><h1 id="Objectives"><a class="anchor hidden-xs" href="#Objectives" title="Objectives"><i class="fa fa-link"></i></a>Objectives</h1><ul>
<li>Build a relational database in PostgreSQL</li>
<li>Import the database into HDFS via Sqoop</li>
</ul><h1 id="Description"><a class="anchor hidden-xs" href="#Description" title="Description"><i class="fa fa-link"></i></a>Description</h1><p>Big data is changing the way companies do business and creating a need for data engineers who can collect and manage large quantities of data. Data engineering is the practice of designing and building systems for collecting, storing, and analyzing data at scale.</p><center>
<img src="https://i.imgur.com/oIxLrv7.png" width="600">
<p>A typical big data pipeline</p>
</center><p>In the final project of this course, you need to build an end-to-end big data pipeline which accepts input data files, analyzes the data in the cluster and displays the results in a web dashboard. We divided the pipeline into four stages where in this tutorial we will cover the first stage. Before starting to build the pipeline, it is always good to check the data and perform preprocessing if needed. For simplicity, here, we are dealing with batch processing since the data in the files is fixed and no real-time update exists. In this first stage, we have to do as follows:<br>
1- Build a relational database via PostgreSQL<br>
2- Import the database into HDFS via Sqoop</p><h1 id="Dataset-Description"><a class="anchor hidden-xs" href="#Dataset-Description" title="Dataset-Description"><i class="fa fa-link"></i></a>Dataset Description</h1><p>The dataset that I am using in these tutorials is about the departments and employees in a company. It consists of two <code>.csv</code> files.</p><p>The file <code>emps.csv</code> contains information about employees:</p><ul>
<li>EMPNO is a unique employee number; it is the primary key of the employee table.</li>
<li>ENAME stores the employee’s name.</li>
<li>The JOB attribute stores the name of the job the employee does.</li>
<li>The MGR attribute contains the employee number of the employee who manages that employee. If the employee has no manager, then the MGR column for that employee is left set to null.</li>
<li>The HIREDATE column stores the date on which the employee joined the company.</li>
<li>The SAL column contains the details of employee salaries.</li>
<li>The COMM attribute stores values of commission paid to employees. Not all employees receive commission, in which case the COMM field is set to null.</li>
<li>The DEPTNO column stores the department number of the department in which each employee is based. This data item acts a foreign key, linking the employee details stored in the EMP table with the details of departments in which employees work, which are stored in the DEPT table.</li>
</ul><p>The file <code>depts.csv</code> contains information about departments:</p><ul>
<li>DEPTNO: The primary key containing the department numbers used to identify each department.</li>
<li>DNAME: The name of each department.</li>
<li>LOC: The location where each department is based.</li>
</ul><div class="alert alert-danger">
<p><strong>Note:</strong> In these tutorials, I provide two methods to run the commands. The first method is on the A. IU Hadoop cluster, and the second method is on the B. HDP Sandbox.</p>
</div><h1 id="A-IU-Hadoop-cluster"><a class="anchor hidden-xs" href="#A-IU-Hadoop-cluster" title="A-IU-Hadoop-cluster"><i class="fa fa-link"></i></a>A. IU Hadoop cluster</h1><p><strong>Note:</strong> We assume that your current working directory <code>.</code> is your repo root directory (for instance, my repo root directory is <code>/home/teamx/project/bigdata-final-project-iu-2024</code>).</p><h2 id="Initiate-the-project-repository"><a class="anchor hidden-xs" href="#Initiate-the-project-repository" title="Initiate-the-project-repository"><i class="fa fa-link"></i></a>Initiate the project repository</h2><p>Access the cluster using the credentials provided by the TA and go to your home directory which is <code>/home/teamx</code> (where <code>x</code> is your team number). Duplicate the <a href="https://github.com/firas-jolha/bigdata-final-project-iu-2024.git" target="_blank" rel="noopener">project repo</a> shared on Github. You can learn how to duplicate a repo from this <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/duplicating-a-repository" target="_blank" rel="noopener">link</a>. The root directory of my repo in the cluster is <code>/home/teamx/project/bigdata-final-project-iu-2024</code>.</p><h2 id="Download-dataset"><a class="anchor hidden-xs" href="#Download-dataset" title="Download-dataset"><i class="fa fa-link"></i></a>Download dataset</h2><p>You need to download the dataset files of your project from their sources and put them in <code>./data</code> folder. Notice that you need to automate this task by modifying scripts in <code>./scripts</code> folder.</p><p>I added the following to <code>scripts/stage1.sh</code></p><pre><code class="wrap sh hljs"><span class="hljs-title">url</span>=<span class="hljs-string">"https://disk.yandex.com/d/EgOiWzvrh9qLIg"</span>

<span class="hljs-title">wget</span> <span class="hljs-string">"$(yadisk-direct $url)"</span> -<span class="hljs-type">O</span> <span class="hljs-class"><span class="hljs-keyword">data</span>/<span class="hljs-keyword">data</span>.zip</span>

<span class="hljs-title">unzip</span> <span class="hljs-class"><span class="hljs-keyword">data</span>/<span class="hljs-keyword">data</span>.zip -d <span class="hljs-keyword">data</span>/</span>
<span class="hljs-title">cp</span> <span class="hljs-class"><span class="hljs-keyword">data</span>/toy-<span class="hljs-keyword">data</span>/*.csv <span class="hljs-keyword">data</span>/</span>
<span class="hljs-title">rm</span> -rf <span class="hljs-class"><span class="hljs-keyword">data</span>/toy-<span class="hljs-keyword">data</span></span>
<span class="hljs-title">rm</span> <span class="hljs-class"><span class="hljs-keyword">data</span>/<span class="hljs-keyword">data</span>.zip</span>
</code></pre><p>To test the stage 1, we can run the script <code>bash stages/stage1.sh</code></p><h2 id="Build-a-relational-Database-via-PostgreSQL"><a class="anchor hidden-xs" href="#Build-a-relational-Database-via-PostgreSQL" title="Build-a-relational-Database-via-PostgreSQL"><i class="fa fa-link"></i></a>Build a relational Database via PostgreSQL</h2><p>In this task, you need to write SQL statements for importing the data files into the database created by the TA. You can explore the database in an interactive mode in <code>pgAdmin</code> but for project purposes, you need to write them in <code>.sql</code> files and then you execute the statements using Python scripts. Here, I will use <code>psycopg2</code> library for <code>python 3.6</code>. I will create three sql files (1.<code>sql/create_tables.sql</code> and 2. <code>sql/import_data.sql</code> 3.<code>sql/test_database.sql</code>) then I will write a Python script <code>scripts/build_projectdb.py</code> which will use <code>execute</code> and <code>copy_expert</code> functions from the abovementioned library to create the tables and import the data. This library uses The JDBC driver for Postgresql to run SQL statements on the dbms. You can also connect to the database (JDBC connection) using the tool <code>beeline</code> from Apache Hive (This is made to run HiveQL queries which will be covered in stage II). Notice that the script <code>scripts/build_projectdb.py</code> should replicate this task without errors. This means, for the second run of the script I should not get any errors.</p><p>I will give here some of the basic steps to build this database <code>teamx_projectdb</code> but feel free to extend it for your project purposes.</p><div class="alert alert-warning">
<p><strong>Note:</strong> You do not need to drop or create a database since it is already created by the TA.</p>
</div><p>We will store the SQL statements for building the tables in a file <code>sql/create_tables.sql</code>.</p><ol>
<li>Create tables <code>emps</code>, <code>depts</code>.</li>
</ol><pre><code class="wrap sql hljs">
<span class="hljs-comment">-- Optional</span>
<span class="hljs-comment">-- but it is useful if you want to not commit the change when some errors happened before the commit statement</span>
<span class="hljs-keyword">START</span> <span class="hljs-keyword">TRANSACTION</span>;


<span class="hljs-comment">-- Add tables</span>
<span class="hljs-comment">-- emps table</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> emps (
    empno <span class="hljs-built_in">integer</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    ename <span class="hljs-built_in">VARCHAR</span> ( <span class="hljs-number">50</span> ) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    job <span class="hljs-built_in">VARCHAR</span> ( <span class="hljs-number">50</span> ) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    mgr <span class="hljs-built_in">integer</span>,
    hiredate <span class="hljs-built_in">date</span>,
    sal <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),
    comm <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),
    deptno <span class="hljs-built_in">integer</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);

<span class="hljs-comment">-- dept table</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> depts(
    deptno <span class="hljs-built_in">integer</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    dname <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    location <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);
</code></pre><div class="alert alert-info">
<p><strong>Note:</strong> In the standard, it is not necessary to issue START TRANSACTION to start a transaction block: any SQL command implicitly begins a block. PostgreSQL’s behavior can be seen as implicitly issuing a COMMIT after each command that does not follow START TRANSACTION (or BEGIN), and it is therefore often called “autocommit”. Other relational database systems might offer an <em>autocommit</em> feature as a convenience.</p>
</div><ol start="2">
<li>Add the constraints.</li>
</ol><pre><code class="wrap sql hljs"><span class="hljs-comment">-- Add constraints</span>
<span class="hljs-comment">-- FKs</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emps <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> fk_emps_mgr_empno;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emps <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> fk_emps_mgr_empno <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>(mgr) <span class="hljs-keyword">REFERENCES</span> emps (empno);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emps <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> fk_emps_deptno_deptno;

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emps <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> fk_emps_deptno_deptno <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>(deptno) <span class="hljs-keyword">REFERENCES</span> depts (deptno);

<span class="hljs-comment">-- This is related to how the date types are stored in my dataset</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">DATABASE</span> teamx_projectdb <span class="hljs-keyword">SET</span> datestyle <span class="hljs-keyword">TO</span> iso, ymd;

<span class="hljs-keyword">COMMIT</span>;
</code></pre><ol start="3">
<li>Load data from <code>csv</code> files. Here I will create another sql file <code>sql/import_data.sql</code>.</li>
</ol><pre><code class="wrap sql hljs"><span class="hljs-comment">-- always test if you can import the data from PgAdmin then you automate it by writing the script</span>

COPY emps FROM STDIN <span class="hljs-keyword">WITH</span> CSV HEADER DELIMITER <span class="hljs-string">','</span> QUOTE <span class="hljs-string">'\''</span>  <span class="hljs-literal">NULL</span> <span class="hljs-keyword">AS</span> <span class="hljs-string">'null'</span>;

COPY depts FROM STDIN <span class="hljs-keyword">WITH</span> CSV HEADER DELIMITER <span class="hljs-string">','</span> QUOTE <span class="hljs-string">'\''</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">AS</span> <span class="hljs-string">'null'</span>;
</code></pre><ol start="4">
<li>Perform select query on the database to check the results. At the end commit the transaction block. We can put these sql statements in <code>sql/test_database.sql</code>.</li>
</ol><pre><code class="wrap sql hljs"><span class="hljs-comment">-- optional</span>
<span class="hljs-comment">-- For checking the content of tables</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> emps <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">10</span>;
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> depts <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">10</span>;

</code></pre><p>You can also use <code>beeline</code> to connect to the database as follows:</p><ol>
<li>You add the JDBC driver for Postgresql</li>
<li>You connect by passing JDBC connection string</li>
<li>You insert your username and password</li>
</ol><pre><code class="sql hljs">#&gt; beeline

beeline&gt; !addlocaldriverjar /shared/postgresql-42.6.1.jar
scan complete in 734ms
beeline&gt; !connect jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb
scan complete in 0ms
scan complete in 399ms
Connecting to jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb
Enter username for jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb: teamx
Enter password for jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb: **********
Connected to: PostgreSQL (version 14.3)
Driver: PostgreSQL JDBC Driver (version 42.6.1)
Transaction isolation: TRANSACTION_REPEATABLE_READ
0: jdbc:postgresql://hadoop-04.uni.innopolis.&gt; -- execute SQL commands here
</code></pre><div class="alert alert-warning">
<p><strong>Note:</strong> Do not forget, that the tasks in the project should not return errors when I run the stages for the second time, so you should clear/drop the objects before creating new ones.</p>
<!-- This is true for all scripts in the pipeline. -->
</div><div class="alert alert-warning">
<p><strong>Note:</strong> The max size to load data from PgAdmin is 200MB.</p>
</div><p>The script <code>scripts/build_projectdb.py</code></p><pre><code class="python hljs"><span class="hljs-keyword">import</span> psycopg2 <span class="hljs-keyword">as</span> psql
<span class="hljs-keyword">from</span> pprint <span class="hljs-keyword">import</span> pprint
<span class="hljs-keyword">import</span> os


<span class="hljs-comment"># Read password from secrets file</span>
file = os.path.join(<span class="hljs-string">"secrets"</span>, <span class="hljs-string">".psql.pass"</span>)
<span class="hljs-keyword">with</span> open(file, <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> file:
        password=file.read().rstrip()

        

<span class="hljs-comment"># build connection string</span>
conn_string=<span class="hljs-string">"host=hadoop-04.uni.innopolis.ru port=5432 user=teamx dbname=teamx_projectdb password={}"</span>.format(<span class="hljs-keyword">pass</span>)


<span class="hljs-comment"># Connect to the remote dbms</span>
<span class="hljs-keyword">with</span> psql.connect(conn_string) <span class="hljs-keyword">as</span> conn:
        
        <span class="hljs-comment"># Create a cursor for executing psql commands</span>
        cur = conn.cursor()
        <span class="hljs-comment"># Read the commands from the file and execute them.</span>
        <span class="hljs-keyword">with</span> open(os.path.join(<span class="hljs-string">"sql"</span>,<span class="hljs-string">"create_tables.sql"</span>)) <span class="hljs-keyword">as</span> file:
                content = file.read()
                cur.execute(content)
        conn.commit()

        <span class="hljs-comment"># Read the commands from the file and execute them.</span>
        <span class="hljs-keyword">with</span> open(os.path.join(<span class="hljs-string">"sql"</span>, <span class="hljs-string">"import_data.sql"</span>)) <span class="hljs-keyword">as</span> file:
                <span class="hljs-comment"># We assume that the COPY commands in the file are ordered (1.depts, 2.emps)</span>
                commands= file.readlines()
                <span class="hljs-keyword">with</span> open(os.path.join(<span class="hljs-string">"data"</span>,<span class="hljs-string">"depts.csv"</span>), <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> depts:
                        cur.copy_expert(commands[<span class="hljs-number">0</span>], depts)
                <span class="hljs-keyword">with</span> open(os.path.join(<span class="hljs-string">"data"</span>,<span class="hljs-string">"emps.csv"</span>), <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> emps:
                        cur.copy_expert(commands[<span class="hljs-number">1</span>], emps)

        <span class="hljs-comment"># If the sql statements are CRUD then you need to commit the change</span>
        conn.commit()

        pprint(conn)
        cur = conn.cursor()
        <span class="hljs-comment"># Read the sql commands from the file</span>
        <span class="hljs-keyword">with</span> open(os.path.join(<span class="hljs-string">"sql"</span>, <span class="hljs-string">"test_database.sql"</span>)) <span class="hljs-keyword">as</span> file:
                commands = file.readlines()
                <span class="hljs-keyword">for</span> command <span class="hljs-keyword">in</span> commands:
                        cur.execute(command)
                        <span class="hljs-comment"># Read all records and print them                        </span>
                        pprint(cur.fetchall())

</code></pre><p>We add the command to run this script to <code>scripts/stage1.sh</code> file.</p><div class="alert alert-success">
<h3 id="Project-checklist0"><a class="anchor hidden-xs" href="#Project-checklist0" title="Project-checklist0"><i class="fa fa-link"></i></a><strong>Project checklist</strong></h3>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Define schema for all tables.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Create all tables.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Create all required constraints.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Load all data to all tables.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Write scripts to automate the tasks above.</li>
</ul>
</div><h2 id="Import-the-database-into-HDFS-via-Sqoop"><a class="anchor hidden-xs" href="#Import-the-database-into-HDFS-via-Sqoop" title="Import-the-database-into-HDFS-via-Sqoop"><i class="fa fa-link"></i></a>Import the database into HDFS via Sqoop</h2><p>Sqoop is a command-line tool used for importing data from relational databases to HDFS. It is a data ingestion tool that enables you to bulk import and export data from a relational database to/from HDFS. You can use Sqoop to import data into HDFS or directly into Hive. Sqoop is installed in the cluster as a client and we will use the command <code>sqoop</code> for that purpose. We will import the tables created in PostgreSQL to HDFS and store them in <code>/user/teamx/project/warehouse</code> folder.</p><p>Now we are ready to run commands on Sqoop to call Postgresql databases. You run these commands on the cluster node <code>hadoop-01.uni.innopolis.ru</code> where you have access in. Here, I put some examples.</p><div class="alert alert-warning">
<p>You can read the password from <code>secrets/.psql.pass</code> in the terminal as follows:</p>
<pre><code class="yaml hljs"><span class="hljs-string">password=$(head</span> <span class="hljs-bullet">-n</span> <span class="hljs-number">1</span> <span class="hljs-string">secrets/.psql.pass)</span>
</code></pre>
</div><ol>
<li>List all databases for user <code>teamx</code></li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">list-databases</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">teamx</span> <span class="hljs-bullet">--password</span> <span class="hljs-string">$password</span>
</code></pre><ol start="2">
<li>List all tables of database <code>teamx_projectdb</code> for user <code>teamx</code></li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">list-tables</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">teamx</span> <span class="hljs-bullet">--password</span> <span class="hljs-string">$password</span>
</code></pre><ol start="3">
<li>Import all tables of the database <code>emps</code> and store them in HDFS at <code>/user/teamx/project/warehouse</code> folder. The datafiles will be compressed in Snappy and serialized in AVRO format.</li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">import-all-tables</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">teamx</span> <span class="hljs-bullet">--password</span> <span class="hljs-string">$password</span> <span class="hljs-bullet">--compression-codec=snappy</span> <span class="hljs-bullet">--compress</span> <span class="hljs-bullet">--as-avrodatafile</span> <span class="hljs-bullet">--warehouse-dir=project/warehouse</span> <span class="hljs-bullet">--m</span> <span class="hljs-number">1</span>
</code></pre><ol start="4">
<li>Import a specific table from the database <code>emps</code> with specific columns <code>empno, sal</code> and store it in HDFS at <code>/user/teamx/project/warehouse</code> folder</li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">import</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://hadoop-04.uni.innopolis.ru/teamx_projectdb</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">teamx</span> <span class="hljs-bullet">--password</span> <span class="hljs-string">$password</span> <span class="hljs-bullet">--compression-codec=snappy</span> <span class="hljs-bullet">--compress</span> <span class="hljs-bullet">--as-avrodatafile</span> <span class="hljs-bullet">--warehouse-dir=project/warehouse</span> <span class="hljs-bullet">--m</span> <span class="hljs-number">1</span> <span class="hljs-bullet">--table</span> <span class="hljs-string">emps</span> <span class="hljs-bullet">--columns</span> <span class="hljs-string">empno,</span> <span class="hljs-string">sal</span>
</code></pre><div class="alert alert-info">
<p>When importing data in Sqoop, you could run a SQL query using <code>--query</code> option and also filter data using <code>--where</code> option. More options in the <a href="https://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html" target="_blank" rel="noopener">documentation</a>.</p>
</div><div class="alert alert-info">
<p>You can use the option <code>--direct</code> if you have <code>psql</code> installed which does not create Map-reduce jobs (to run on Hadoop Map-reduce engine) and the task is executed using <code>psql</code> command. Here, we do not use <code>--direct</code> option, such that we use Mapreduce engine for running Sqoop jobs.</p>
</div><div class="alert alert-warning">
<p><strong>Note:</strong> Do not forget to clear the folder <code>hdfs://user/teamx/project/warehouse</code>  if exists before importing the data.</p>
</div><div class="alert alert-danger">
<p>For the project, you need to import the data from Postgresql to HDFS as AVRO and compressed in Snappy.</p>
</div><div class="alert alert-success">
<h3 id="Project-checklist0"><a class="anchor hidden-xs" href="#Project-checklist0" title="Project-checklist0"><i class="fa fa-link"></i></a><strong>Project checklist</strong></h3>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Import all tables to HDFS serialized in AVRO format and compressed using Snappy codec.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Put the *.avsc and *.java files in output/ folder of you repo.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Write scripts to automate the tasks above.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Run the script <code>stage1.sh</code> to test the first stage.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Check the quality of scripts in the first stage using <code>pylint</code> command.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Summarize your work in the first stage and add it to the report.</li>
</ul>
</div><h1 id="B-HDP-Sandbox"><a class="anchor hidden-xs" href="#B-HDP-Sandbox" title="B-HDP-Sandbox"><i class="fa fa-link"></i></a>B. HDP Sandbox</h1><h2 id="Initiate-the-project-repository1"><a class="anchor hidden-xs" href="#Initiate-the-project-repository1" title="Initiate-the-project-repository1"><i class="fa fa-link"></i></a>Initiate the project repository</h2><p>Access the cluster using the credentials provided by the TA and go to your home directory which is <code>/home/teamx</code> (where <code>x</code> is your team number). Duplicate the <a href="https://github.com/firas-jolha/bigdata-final-project-iu-2024.git" target="_blank" rel="noopener">project repo</a> shared on Github. You can learn how to duplicate a repo from this <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/duplicating-a-repository" target="_blank" rel="noopener">link</a>.</p><h2 id="Build-a-relational-Database-via-PostgreSQL1"><a class="anchor hidden-xs" href="#Build-a-relational-Database-via-PostgreSQL1" title="Build-a-relational-Database-via-PostgreSQL1"><i class="fa fa-link"></i></a>Build a relational Database via PostgreSQL</h2><p>In this step, you need to write SQL statements for creating the database (let’s call it  <code>project</code>) and importing the <code>csv</code> files into it. You can test the statements in an interactive mode but for project purposes, you need to write them in <code>.sql</code> file and then you execute the statements by passing the file via command <code>psql</code> which should replicate all the steps.</p><p>I will give here some of the basic steps to create the database <code>project</code> but feel free to extend it for your project purposes.</p><ol>
<li>Drop the databases if exist.</li>
</ol><pre><code class="wrap sh hljs">psql -U postgres -c '<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DATABASE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-keyword">project</span>;'
</code></pre><ol start="2">
<li>Create a database <code>project</code></li>
</ol><pre><code class="wrap sh hljs">psql -U postgres -c '<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> <span class="hljs-keyword">project</span>;'
</code></pre><div class="alert alert-info">
<p>You can merge the previous commands into one call of <code>psql</code> command.</p>
</div><p>We will store the SQL statements in a file <code>db.sql</code>.<br>
3. Create tables <code>emps</code>, <code>depts</code>, <code>salgrades</code></p><pre><code class="wrap sql hljs"><span class="hljs-comment">-- switch to the database</span>
\c project;

<span class="hljs-comment">-- Optional</span>
<span class="hljs-keyword">START</span> <span class="hljs-keyword">TRANSACTION</span>;

<span class="hljs-comment">-- Add tables</span>
<span class="hljs-comment">-- emps table</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> emps (
    empno <span class="hljs-built_in">integer</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    ename <span class="hljs-built_in">VARCHAR</span> ( <span class="hljs-number">50</span> ) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    job <span class="hljs-built_in">VARCHAR</span> ( <span class="hljs-number">50</span> ) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    mgr <span class="hljs-built_in">integer</span>,
    hiredate <span class="hljs-built_in">date</span>,
    sal <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),
    comm <span class="hljs-built_in">decimal</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),
    deptno <span class="hljs-built_in">integer</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);

<span class="hljs-comment">-- dept table</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> depts(
    deptno <span class="hljs-built_in">integer</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    dname <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    location <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);
</code></pre><div class="alert alert-info">
<p><strong>Note:</strong> In the standard, it is not necessary to issue START TRANSACTION to start a transaction block: any SQL command implicitly begins a block. PostgreSQL’s behavior can be seen as implicitly issuing a COMMIT after each command that does not follow START TRANSACTION (or BEGIN), and it is therefore often called “autocommit”. Other relational database systems might offer an <em>autocommit</em> feature as a convenience.</p>
</div><ol start="4">
<li>Add the constraints.</li>
</ol><pre><code class="wrap sql hljs"><span class="hljs-comment">-- Add constraints</span>
<span class="hljs-comment">-- FKs</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emps <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> fk_emps_mgr_empno <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>(mgr) <span class="hljs-keyword">REFERENCES</span> emps (empno);

<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emps <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> fk_emps_deptno_deptno <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span>(deptno) <span class="hljs-keyword">REFERENCES</span> depts (deptno);
</code></pre><ol start="5">
<li>Load data from <code>csv</code> files.</li>
</ol><pre><code class="wrap sql hljs">
<span class="hljs-keyword">SET</span> datestyle <span class="hljs-keyword">TO</span> iso, ymd;

\COPY emps FROM 'data/emps.csv' DELIMITER ',' CSV HEADER NULL AS 'null';

\COPY depts FROM 'data/depts.csv' DELIMITER ',' CSV HEADER NULL AS 'null';
</code></pre><ol start="4">
<li>Perform any additional CRUD operation needed on the database. At the end commit the transaction block.</li>
</ol><pre><code class="wrap sql hljs"><span class="hljs-comment">-- optional</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- For checking the content of tables</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">from</span> emps;
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">from</span> depts;

</code></pre><p>You can run the file <code>db.sql</code> via the command <code>psql</code> as follows:</p><pre><code class="wrap sh hljs">psql -U postgres -d project -f <span class="hljs-keyword">sql</span>/db.<span class="hljs-keyword">sql</span>
</code></pre><div class="alert alert-warning">
<p><strong>Note:</strong> Do not forget, that the file <code>.sql</code> should not return errors when you run it for the second time, so you should clear/drop the objects before creating new database objects.</p>
<!-- This is true for all scripts in the pipeline. -->
</div><div class="alert alert-success">
<h3 id="Project-checklist"><a class="anchor hidden-xs" href="#Project-checklist" title="Project-checklist"><i class="fa fa-link"></i></a><strong>Project checklist</strong></h3>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Define schema for all tables.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Create all tables.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Create all required constraints.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Load all data to all tables.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Write scripts to automate the tasks above.</li>
</ul>
</div><h2 id="Import-the-database-into-HDFS-via-Sqoop1"><a class="anchor hidden-xs" href="#Import-the-database-into-HDFS-via-Sqoop1" title="Import-the-database-into-HDFS-via-Sqoop1"><i class="fa fa-link"></i></a>Import the database into HDFS via Sqoop</h2><p>Sqoop is a command-line tool used for importing data from relational databases to HDFS. It is a data ingestion tool that enables you to bulk import and export data from a database. You can use Sqoop to import data into HDFS or directly into Hive. Sqoop is installed in HDP as a client and we will use the command <code>sqoop</code> for that purpose. We will import the tables created in PostgreSQL to HDFS and store them in <code>/project</code> folder.</p><p>First of all, we need to add some configuration for PostgreSQL as follows:<br>
<code>host all all 0.0.0.0/0 trust</code></p><p>You need to it to the file <code>/var/lib/pgsql/data/pg_hba.conf</code>.</p><div class="alert alert-warning">
<p><strong>Note:</strong> Do not forget to restart Postgresql service as <code>systemctl restart postgresql</code> after updating the config file.</p>
</div><p>Then we need to download the JDBC driver for Postgresql database and put it in the lib path of Sqoop tool as follows:</p><pre><code class="wrap yaml hljs"><span class="hljs-string">wget</span> <span class="hljs-attr">https://jdbc.postgresql.org/download/postgresql-42.6.0.jar</span> <span class="hljs-bullet">--no-check-certificate</span>

<span class="hljs-string">cp</span>  <span class="hljs-string">postgresql-42.6.0.jar</span> <span class="hljs-string">/usr/hdp/current/sqoop-client/lib/</span>
</code></pre><p><img src="https://i.imgur.com/G6MHwXB.png" alt="" class="md-image md-image"></p><p>Now we are ready to run commands on Sqoop to call Postgresql databases. You run these commands on the cluster node. Here, I put some examples.</p><ol>
<li>List all databases for user <code>postgres</code></li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">list-databases</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://localhost/postgres</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">postgres</span>
<span class="hljs-comment"># here postgres in the url //localhost/postgres is used only for passing some database. It does not affect the result if we change to some other existing databases.</span>
</code></pre><ol start="2">
<li>List all tables of database <code>project</code> for user <code>postgres</code></li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">list-tables</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://localhost/project</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">postgres</span>
</code></pre><ol start="3">
<li>Import all tables of the database <code>emps</code> and store them in HDFS at <code>/project/warehouse</code> folder.</li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">import-all-tables</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://localhost/project</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">postgres</span> <span class="hljs-bullet">--compression-codec=snappy</span> <span class="hljs-bullet">--compress</span> <span class="hljs-bullet">--as-avrodatafile</span> <span class="hljs-bullet">--warehouse-dir=/project/warehouse</span> <span class="hljs-bullet">--m</span> <span class="hljs-number">1</span> <span class="hljs-bullet">--direct</span>
</code></pre><ol start="4">
<li>Import a specific table from the database <code>emps</code> with specific columns <code>empno, sal</code> and store it in HDFS at <code>/project/warehouse</code> folder</li>
</ol><pre><code class="wrap yaml hljs"><span class="hljs-string">sqoop</span> <span class="hljs-string">import</span> <span class="hljs-bullet">--connect</span> <span class="hljs-attr">jdbc:postgresql://localhost/postgres</span> <span class="hljs-bullet">--username</span> <span class="hljs-string">postgres</span> <span class="hljs-bullet">--compression-codec=snappy</span> <span class="hljs-bullet">--compress</span> <span class="hljs-bullet">--as-avrodatafile</span> <span class="hljs-bullet">--warehouse-dir=/project/warehouse</span> <span class="hljs-bullet">--m</span> <span class="hljs-number">1</span> <span class="hljs-bullet">--table</span> <span class="hljs-string">emps</span> <span class="hljs-bullet">--columns</span> <span class="hljs-string">empno,</span> <span class="hljs-string">sal</span> <span class="hljs-bullet">--direct</span>
</code></pre><div class="alert alert-info">
<p>When importing data in Sqoop, you could run a SQL query using <code>--query</code> option and also filter data using <code>--where</code> option. More options in the <a href="https://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html" target="_blank" rel="noopener">documentation</a>.</p>
</div><div class="alert alert-warning">
<p>Do not forget to clear the folder <code>/project/warehouse</code>  if exists before importing the data.</p>
</div><div class="alert alert-danger">
<p>For the project, you need to import the data from Postgresql to HDFS as AVRO and compressed in Snappy.</p>
</div><div class="alert alert-success">
<h3 id="Project-checklist1"><a class="anchor hidden-xs" href="#Project-checklist1" title="Project-checklist1"><i class="fa fa-link"></i></a><strong>Project checklist</strong></h3>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Import all tables to HDFS serialized in AVRO format and compressed using Snappy codec.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Put the *.avsc and *.java files in output/ folder of you repo.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Write scripts to automate the tasks above.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Run the script <code>stage1.sh</code> to test the first stage.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Check the quality of scripts in the first stage using <code>pylint</code> command.</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" ><label></label>Summarize your work in the first stage and add it to the report.</li>
</ul>
</div><h1 id="References"><a class="anchor hidden-xs" href="#References" title="References"><i class="fa fa-link"></i></a>References</h1><ul>
<li><a href="https://www.cs.uct.ac.za/mit_notes/database/htmls/chp03.html" target="_blank" rel="noopener">toy-dataset</a></li>
<li><a href="https://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html#_introduction" target="_blank" rel="noopener">Sqoop User Guide</a></li>
<li><a href="https://www.postgresql.org/docs/current/sql-copy.html" target="_blank" rel="noopener">PostgreSQL documentation</a></li>
</ul></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="#Stage-I---Data-collection-and-Ingestion" title="Stage I - Data collection and Ingestion">Stage I - Data collection and Ingestion</a></li>
<li><a href="#Dataset" title="Dataset">Dataset</a></li>
<li><a href="#Agenda" title="Agenda">Agenda</a></li>
<li><a href="#Prerequisites" title="Prerequisites">Prerequisites</a></li>
<li><a href="#Objectives" title="Objectives">Objectives</a></li>
<li><a href="#Description" title="Description">Description</a></li>
<li><a href="#Dataset-Description" title="Dataset Description">Dataset Description</a></li>
<li class=""><a href="#A-IU-Hadoop-cluster" title="A. IU Hadoop cluster">A. IU Hadoop cluster</a><ul class="nav">
<li><a href="#Initiate-the-project-repository" title="Initiate the project repository">Initiate the project repository</a></li>
<li><a href="#Download-dataset" title="Download dataset">Download dataset</a></li>
<li><a href="#Build-a-relational-Database-via-PostgreSQL" title="Build a relational Database via PostgreSQL">Build a relational Database via PostgreSQL</a></li>
<li class=""><a href="#Import-the-database-into-HDFS-via-Sqoop" title="Import the database into HDFS via Sqoop">Import the database into HDFS via Sqoop</a></li>
</ul>
</li>
<li class=""><a href="#B-HDP-Sandbox" title="B. HDP Sandbox">B. HDP Sandbox</a><ul class="nav">
<li class=""><a href="#Initiate-the-project-repository1" title="Initiate the project repository">Initiate the project repository</a></li>
<li class=""><a href="#Build-a-relational-Database-via-PostgreSQL1" title="Build a relational Database via PostgreSQL">Build a relational Database via PostgreSQL</a></li>
<li><a href="#Import-the-database-into-HDFS-via-Sqoop1" title="Import the database into HDFS via Sqoop">Import the database into HDFS via Sqoop</a></li>
</ul>
</li>
<li><a href="#References" title="References">References</a></li>
</ul>
</div><div class="toc-menu" style="">
    <a class="expand-toggle expand-all" href="#">Expand all</a>
    <a class="expand-toggle collapse-all" href="#" style="display: none;">Collapse all</a>
    <a class="back-to-top" href="#">Back to top</a>
    <a class="go-to-bottom" href="#">Go to bottom</a>
</div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;"  >
        <div class="toc"><ul class="nav">
<li><a href="#Stage-I---Data-collection-and-Ingestion" title="Stage I - Data collection and Ingestion">Stage I - Data collection and Ingestion</a></li>
<li><a href="#Dataset" title="Dataset">Dataset</a></li>
<li><a href="#Agenda" title="Agenda">Agenda</a></li>
<li><a href="#Prerequisites" title="Prerequisites">Prerequisites</a></li>
<li><a href="#Objectives" title="Objectives">Objectives</a></li>
<li><a href="#Description" title="Description">Description</a></li>
<li><a href="#Dataset-Description" title="Dataset Description">Dataset Description</a></li>
<li class=""><a href="#A-IU-Hadoop-cluster" title="A. IU Hadoop cluster">A. IU Hadoop cluster</a><ul class="nav">
<li><a href="#Initiate-the-project-repository" title="Initiate the project repository">Initiate the project repository</a></li>
<li><a href="#Download-dataset" title="Download dataset">Download dataset</a></li>
<li><a href="#Build-a-relational-Database-via-PostgreSQL" title="Build a relational Database via PostgreSQL">Build a relational Database via PostgreSQL</a></li>
<li class=""><a href="#Import-the-database-into-HDFS-via-Sqoop" title="Import the database into HDFS via Sqoop">Import the database into HDFS via Sqoop</a></li>
</ul>
</li>
<li class=""><a href="#B-HDP-Sandbox" title="B. HDP Sandbox">B. HDP Sandbox</a><ul class="nav">
<li class=""><a href="#Initiate-the-project-repository1" title="Initiate the project repository">Initiate the project repository</a></li>
<li class=""><a href="#Build-a-relational-Database-via-PostgreSQL1" title="Build a relational Database via PostgreSQL">Build a relational Database via PostgreSQL</a></li>
<li><a href="#Import-the-database-into-HDFS-via-Sqoop1" title="Import the database into HDFS via Sqoop">Import the database into HDFS via Sqoop</a></li>
</ul>
</li>
<li><a href="#References" title="References">References</a></li>
</ul>
</div><div class="toc-menu" style="">
    <a class="expand-toggle expand-all" href="#">Expand all</a>
    <a class="expand-toggle collapse-all" href="#" style="display: none;">Collapse all</a>
    <a class="back-to-top" href="#">Back to top</a>
    <a class="go-to-bottom" href="#">Go to bottom</a>
</div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.0/js/bootstrap.min.js" integrity="sha256-kJrlY+s09+QoWjpkOrXXwhxeaoDz9FW5SaxF8I0DibQ=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
